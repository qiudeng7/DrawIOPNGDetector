
# drawio.png detector

[简体中文](./readme.cn.md) | English

The problem background is that I don't want Windows to open `.drawio.png` files with a regular image viewer, but Windows can't distinguish between `.drawio.png` and `.png` files.

So I created a Python script to let Windows open PNG files through it. The script checks whether the file ends with `.png` or `.drawio.png`. If it's a `.drawio.png` file, it will open it with drawio.

The issue is that when setting the default app in Windows, it's not easy to directly configure a command (it can't be done in Windows settings, and maybe it's possible via the registry, but I don't want to modify the registry).

Thus, I used pyinstaller to package this script into an EXE. We can set the path to `drawio.exe` through a `drawio_path.txt` file.

## Usage

You can download the zip package from the release. The package contains a `run.exe` and an `_internal` folder, generated by pyinstaller. I'm not sure if this EXE will work properly on others' computers. If not, you may need to repackage it using pyinstaller.

After downloading and unzipping the package, there is a `drawio_path.txt` in the `_internal` directory. Update its content to the path of your own `drawio.exe`. Then you can use `run.exe` to open PNG files. For regular `.png` files, it will use the system's default app; for `.drawio.png` files, it will use the app specified in `drawio_path.txt`.

## Repackaging

If the EXE downloaded from the release doesn't work on your computer, you need to repackage it with pyinstaller:

(Actually, I'm not very familiar with pyinstaller—these commands were told to me by AI, and they worked for my needs on my computer.)

```bash
pip install pyinstaller
pyinstaller --onedir --windowed run.py
```

Then, the contents in the `./dist/run` directory are what I released in the release. You need to manually create a `drawio_path.txt` file in the `_internal` directory.